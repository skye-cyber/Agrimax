{% load custom_filters %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Weather Forecast</title>
    {% load static %}
  <link href="{% static 'css/weather.css' %}" rel="stylesheet" >
  <script src="https://cdn.tailcss.com"></script>
  <style>
    /* Body background and typography */
    body {
      background-color: #f7fafc;
      font-family: 'Inter', sans-serif;
    }

    /* Floating weather alert */
    #weatherAlert {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 50;
      border: 2px solid #f6e05e;
    }

    /* Icons for weather */
    .weather-icon {
      width: 40px;
      height: 40px;
    }

    /* Alert fade-in animation */
    .fade-in {
      opacity: 0;
      transition: opacity 1s ease-in-out;
    }
    .fade-in.visible {
      opacity: 1;
    }
    ._card {
        transition: transform 0.3s ease; /* Smooth transition */
    }

    ._card:hover {
        transform: scale(1.03); /* Increase size by 2% */
    }
    .overflow-x-hidden{
      overflow-x:hidden;
    }
    .z-index-100{
      z-index:100;
      }
    .btn {
        cursor: pointer;
    }

    .active {
        background-color: blue;
        color: white;
  }
  </style>
</head>
<body class="bg-green-50 font-serif">

  <!-- Navigation Menu -->
  <nav class="bg-green-800 p-3 md:p-4 lg:p-4 overflow-x-hidden fixed top-0 w-full z-index-100">
    <ul class="flex justify-around text-white font-semibold">
      <li><a href="{% url 'home' %}" class="hover:text-yellow-400">Home</a></li>
      <!--<li><a href="{% url 'home' %}#crop-recommendation" class="hover:text-yellow-400">Crop Recommendation</a></li>-->
      <li><a href="{% url 'home' %}#soil-health" class="hover:text-yellow-400">Soil Health</a></li>
      <li><a href="{% url 'history' %}" class="hover:text-yellow-400">Farm History</a></li>
      <li><a href="{% url 'home' %}#contact" class="hover:text-yellow-400">Contact</a></li>
    </ul>
  </nav>

  <!-- Floating Weather Alert -->
  <div id="weatherAlert" class="hidden fade-in bg-yellow-100 text-yellow-800 mt-8 p-4 rounded-lg shadow-lg">
    <p><strong>Alert:</strong> A significant drop in temperature is expected tomorrow. Protect young crops!</p>
  </div>

  <!-- Weather Page Container -->
  <div class="container mx-auto py-8 px-6 bg-white shadow-lg rounded-lg mt-8">
    <!-- Page Title -->
    <h1 class="text-2xl md:text-3xl lg:text-4xl font-extrabold text-green-700 text-center mb-8">Agricultural Weather Forecast</h1>

    <!-- Forecast and Weather Conditions -->
    <div id="button-container" class="flex Wtype justify-center mb-8 overflow-x-hidden">
      <button id="dailyToggle" class="btn px-2 md:px-3 lg:px-5 py-2 bg-green-600 text-white font-bold rounded-l-lg hover:bg-green-500 transition">Daily</button>
      <button id="hourlyToggle" class="btn px-2 md:px-3 lg:px-5 py-2 bg-green-600 text-white font-bold hover:bg-green-500 transition">Hourly</button>
      <button id="monthlyToggle" class="btn px-2 md:px-3 lg:px-5 py-2 bg-green-600 text-white font-bold hover:bg-green-500 transition">Monthly</button>
      <button id="yearlyToggle" class="btn px-2 md:px-3 lg:px-5 py-2 bg-green-600 text-white font-bold rounded-r-lg hover:bg-green-500 transition">Yearly</button>
    </div>

  <!--.....................................Daily Forecast 7 Days............................................-->
    <div id="dailyForecast" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 mb-4 gap-2">
    <div class="grid gap-6 ml-2">
      <!-- Sample Day Forecast -->
      <div class="bg-green-100 p-6 rounded-lg shadow-md _card">
        <h2 class="text-xl font-bold mb-2 text-green-700">Monday</h2>
        <div class="flex items-center mb-2">
          <img src="https://cdn-icons-png.flaticon.com/512/1163/1163660.png" alt="Sunny" class="w-16 h-16">
          <p class="text-gray-600 ml-3">Condition: <span class="text-yellow-600 font-semibold">Sunny</span></p>
        </div>
        <p class="text-gray-600">Temperature: <span class="text-red-600">29°C / 16°C</span></p>
        <p class="text-gray-600">Humidity: <span class="text-green-800">50%</span></p>
        <p class="text-gray-600">Wind Speed: <span class="text-green-800">12 km/h</span></p>
      </div>

      <!-- Additional Forecast Cards -->
      <div class="bg-green-100 p-6 rounded-lg shadow-md _card">
        <h2 class="text-xl font-bold mb-2 text-green-700">Tuesday</h2>
        <div class="flex items-center mb-2">
          <img src="https://cdn-icons-png.flaticon.com/512/1163/1163624.png" alt="Cloudy" class="w-16 h-16">
          <p class="text-gray-600 ml-3">Condition: <span class="text-gray-600 font-semibold">Cloudy</span></p>
        </div>
        <p class="text-gray-600">Temperature: <span class="text-red-600">26°C / 18°C</span></p>
        <p class="text-gray-600">Humidity: <span class="text-green-800">65%</span></p>
        <p class="text-gray-600">Wind Speed: <span class="text-green-800">15 km/h</span></p>
      </div>
    </div>

    <div class="grid gap-6 ml-2">
      <div class="bg-green-100 p-6 rounded-lg shadow-md _card">
        <h2 class="text-xl font-bold mb-2 text-green-700">Wednesday</h2>
        <div class="flex items-center mb-2">
          <img src="https://cdn-icons-png.flaticon.com/512/1163/1163660.png" alt="Sunny" class="w-16 h-16">
          <p class="text-gray-600 ml-3">Condition: <span class="text-yellow-600 font-semibold">Sunny</span></p>
        </div>
        <p class="text-gray-600">Temperature: <span class="text-red-600">29°C / 16°C</span></p>
        <p class="text-gray-600">Humidity: <span class="text-green-800">50%</span></p>
        <p class="text-gray-600">Wind Speed: <span class="text-green-800">12 km/h</span></p>
      </div>

      <!-- Additional Forecast Cards -->
      <div class="bg-green-100 p-6 rounded-lg shadow-md _card">
        <h2 class="text-xl font-bold mb-2 text-green-700">Thursday</h2>
        <div class="flex items-center mb-2">
          <img src="https://cdn-icons-png.flaticon.com/512/1163/1163624.png" alt="Cloudy" class="w-16 h-16">
          <p class="text-gray-600 ml-3">Condition: <span class="text-gray-600 font-semibold">Cloudy</span></p>
        </div>
        <p class="text-gray-600">Temperature: <span class="text-red-600">26°C / 18°C</span></p>
        <p class="text-gray-600">Humidity: <span class="text-green-800">65%</span></p>
        <p class="text-gray-600">Wind Speed: <span class="text-green-800">15 km/h</span></p>
      </div>
    </div>

    <div class="grid gap-6 mt-2 ml-2">
      <div class="bg-green-100 p-6 rounded-lg shadow-md _card">
        <h2 class="text-xl font-bold mb-2 text-green-700">Friday</h2>
        <div class="flex items-center mb-2">
          <img src="https://cdn-icons-png.flaticon.com/512/1163/1163660.png" alt="Sunny" class="w-16 h-16">
          <p class="text-gray-600 ml-3">Condition: <span class="text-yellow-600 font-semibold">Sunny</span></p>
        </div>
        <p class="text-gray-600">Temperature: <span class="text-red-600">29°C / 16°C</span></p>
        <p class="text-gray-600">Humidity: <span class="text-green-800">50%</span></p>
        <p class="text-gray-600">Wind Speed: <span class="text-green-800">12 km/h</span></p>
      </div>
    </div>
    </div>

   <!--............................Hourly Forecast Section (Initially Hidden)...................................-->
    <div id="hourlyForecast" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 hidden">
      <!-- Daily 3 HOURS Forecast Section -->
      <div class="bg-green-100 p-6 rounded-lg shadow-md _card">

          <h2 class="text-xl font-bold mb-2 text-green-700">For 3 HRS</h2>
          <h2 class="text-gray-600">Country: <span class="text-green-700">{{ country|default:"Value not found" }}</span></h2>
          <img src="https://cdn-icons-png.flaticon.com/512/{{icon}}.png" class="w-16 h-16" alt="Weather Icon">
          <h2 class="text-gray-600">Location: <span class="text-blue-600">{{ location }}°C</span></h2>
          <div class="flex items-center mb-2">
          <p class="text-gray-600 ml-0 font-bold">Condition: <span id="cond" class="text-yellow-600 font-semibold">{{ weather_main }}</span></p>
            <p class="text-gray-600 ml-3">Description: <span class="text-yellow-600 font-semibold">{{ weather_description }}</span></p>
        </div>
          <p class="text-gray-600">Temperature: <span class="text-red-600">{{ temperature }}°C</span></p>
          <p class="text-gray-600">Apparent Temperature: <span class="text-green-800">{{ feels_like }}°C</span></p>
          <p class="text-gray-600">Humidity: <span class="text-green-800">{{ humidity }}%</span></p>
          <p class="text-gray-600">Wind Speed: <span class="text-green-800">{{ wind_speed }}m/s</span></p>
          <p class="text-gray-600">Wind Direction: <span class="text-green-800">{{ wind_direction }}°</span></p>
          <p class="text-gray-600">Pressure:: <span class="text-green-800">{{ pressure }}hPa</span></p>
          <p class="text-gray-600">Cloud Cover: <span class="text-green-800">{{ cloud_cover }}%</span></p>
          <p class="text-gray-600">Sunrise: <span class="text-green-800">{{ sunrise }}</span></p>
          <p class="text-gray-600">Sunset: <span class="text-green-800">{{ sunset }}</span></p>
          <p class="text-gray-600">Rain Last Hour: <span class="text-green-800">{{ rain_last_hour }}mm</span></p>
        </div>

      <!-- Hourly Forecast Example -->
      <div class="bg-green-100 p-6 rounded-lg shadow-md _card">
        <h2 class="text-xl font-bold mb-2 text-green-700">06:00 AM</h2>
        <div class="flex items-center mb-2">
          <img src="https://cdn-icons-png.flaticon.com/512/1163/1163622.png" alt="Windy" class="w-16 h-16">
          <p class="text-gray-600 ml-3">Condition: <span class="text-blue-600 font-semibold">Windy</span></p>
        </div>
        <p class="text-gray-600">Temperature: <span class="text-red-600">16°C</span></p>
        <p class="text-gray-600">Humidity: <span class="text-green-800">85%</span></p>
        <p class="text-gray-600">Wind Speed: <span class="text-blue-600">25 km/h</span></p>
      </div>
    </div>

    <!--...........................Monthly Forecast Section (Initially Hidden)..................................-->
    <div id="monthlyForecast" class="hidden">
      <h2 class="text-2xl font-bold mb-4 text-green-700">Monthly Weather Forecast</h2>
      <p class="text-gray-600">Predictions for the entire month will help farmers plan for long-term activities.</p>
      <!-- Example Monthly Forecast -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <div class="bg-green-100 p-6 rounded-lg shadow-md _card">
          <h2 class="text-xl font-bold mb-2 text-green-700">Average Temperature</h2>
          <div class="flex items-center mb-2">
          <p class="text-gray-600">Day: <span class="text-red-600">27°C</span></p>
          <p class="text-gray-600">Night: <span class="text-red-600">15°C</span></p>
          </div>
        </div>

        <div class="bg-green-100 p-6 rounded-lg shadow-md _card">
          <h2 class="text-xl font-bold mb-2 text-green-700">Rainfall</h2>
          <div class="flex items-center mb-2">
          <img src="https://cdn-icons-png.flaticon.com/512/1163/1163657.png" alt="rainy" class="w-16 h-16">
          <p class="text-gray-600">Expected Rainfall: <span class="text-blue-600">120mm</span></p>
          </div>
        </div>
        <!-- More monthly stats -->
      </div>
    </div>

    <!--..................................Yearly Forecast Section (Initially Hidden)................................-->
    <div id="yearlyForecast" class="hidden">
      <h2 class="text-2xl font-bold mb-4 text-green-700">Yearly Weather Forecast</h2>
      <p class="text-gray-600">Yearly predictions provide a broader view for long-term agricultural strategies.</p>
      <!-- Example Yearly Forecast -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <div class="bg-green-100 p-6 rounded-lg shadow-md _card">
          <h2 class="text-xl font-bold mb-2 text-green-700">Annual Rainfall</h2>
          <div class="flex items-center mb-2">
          <img src="https://cdn-icons-png.flaticon.com/512/1163/1163657.png" alt="rainy" class="w-16 h-16">
          <p class="text-gray-600">Total Rainfall: <span class="text-blue-600">1350mm</span></p>
          </div>
        </div>

        <div class="bg-green-100 p-6 rounded-lg shadow-md _card">
          <h2 class="text-xl font-bold mb-2 text-green-700">Average Temperature</h2>
          <div class="flex items-center mb-2">
            <img src="https://cdn-icons-png.flaticon.com/512/1163/1163664.png" class="w-16 h-16">
            <span class="text-red-600">28°C</span></p>
          <p class="text-gray-600">Night: <span class="text-red-600">14°C</span></p>
          </div>
        </div>

        <div class="bg-green-100 p-6 rounded-lg shadow-md _card">
          <h2 class="text-xl font-bold mb-2 text-green-700">Frost Dates</h2>
          <div class="flex items-center mb-2">
            <img src="https://cdn-icons-png.flaticon.com/512/1163/1163665.png" class="w-16 h-16">
            <p class="text-gray-600">Expected Frost Dates: <span class="text-blue-600">June 15 - June 20</span></p>
          </div>
        </div>
        <!-- More yearly stats can be added here -->
      </div>
    </div>

  </div>

  <script>
    // JavaScript to toggle between forecast views
    const dailyToggle = document.getElementById("dailyToggle");
    const hourlyToggle = document.getElementById("hourlyToggle");
    const monthlyToggle = document.getElementById("monthlyToggle");
    const yearlyToggle = document.getElementById("yearlyToggle");

    const dailyForecast = document.getElementById("dailyForecast");
    const hourlyForecast = document.getElementById("hourlyForecast");
    const monthlyForecast = document.getElementById("monthlyForecast");
    const yearlyForecast = document.getElementById("yearlyForecast");

    dailyToggle.addEventListener("click", () => {
      dailyForecast.classList.remove("hidden");
      hourlyForecast.classList.add("hidden");
      monthlyForecast.classList.add("hidden");
      yearlyForecast.classList.add("hidden");
    });

    hourlyToggle.addEventListener("click", () => {
      dailyForecast.classList.add("hidden");
      hourlyForecast.classList.remove("hidden");
      monthlyForecast.classList.add("hidden");
      yearlyForecast.classList.add("hidden");
    });

    monthlyToggle.addEventListener("click", () => {
      dailyForecast.classList.add("hidden");
      hourlyForecast.classList.add("hidden");
      monthlyForecast.classList.remove("hidden");
      yearlyForecast.classList.add("hidden");
    });

    yearlyToggle.addEventListener("click", () => {
      dailyForecast.classList.add("hidden");
      hourlyForecast.classList.add("hidden");
      monthlyForecast.classList.add("hidden");
      yearlyForecast.classList.remove("hidden");
    });

    // Function to show weather alert
    function showWeatherAlert() {
      const alert = document.getElementById("weatherAlert");
      alert.classList.remove("hidden");
      alert.classList.add("visible");

      // Hide alert after 5 seconds
      setTimeout(() => {
        alert.classList.remove("visible");
        alert.classList.add("hidden");
      }, 5000);
    }

    // Call function to show alert for demonstration
    showWeatherAlert();


// Logic to highlight active button
// Get all buttons
const buttons = document.querySelectorAll("#button-container .btn");

buttons.forEach((button) => {
    button.addEventListener('click', function() {
        // Remove 'active' class from all buttons
        buttons.forEach((btn) => btn.classList.remove('active'));

        // Add 'active' class to the clicked button
        this.classList.add('active');
    });
});

/*icon_dict = {
  "Rain":"https://cdn-icons-png.flaticon.com/512/1163/1163657.png",
  "Sun":"https://cdn-icons-png.flaticon.com/512/1163/1163660.png",
  "Wind":"https://cdn-icons-png.flaticon.com/512/1163/1163622.png",
  "Cloud":"https://cdn-icons-png.flaticon.com/512/1163/1163624.png",
  "Frost":"https://cdn-icons-png.flaticon.com/512/1163/1163665.png",
    }
// Create an image element
var imgElement = document.createElement("img");

cond = document.getElementById('cond').innerText
// Set the 'src' attribute
imgElement.src = icon_dict['cond'];

// Set the 'class' attribute for width and height
imgElement.classList.add("w-16", "h-16");

// Append the image to a container or the body
document.body.appendChild(imgElement);

document.getElementById("w-icon").appendChild(imgElement);*/

  </script>

    <!-- Footer -->
    <footer class="bg-green-800 text-white p-4 mt-12">
        <div class="container mx-auto text-center">
            <p>&copy; 2024 Farm Weather Forecast | Designed for Farmers by Farmers</p>
        </div>
    </footer>
</body>
</html>
